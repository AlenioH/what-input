!function(root,factory){"function"==typeof define&&define.amd?define([],function(){return factory()}):"object"==typeof exports?module.exports=factory():root.whatInput=factory()}(this,function(){function bufferInput(event){clearTimeout(timer),setInput(event),buffer=!0,timer=setTimeout(function(){buffer=!1},1e3)}function regularInput(event){buffer||setInput(event)}function setInput(event){var key=event.which||event.keyCode,target=event.target||event.srcElement,value=inputMap[event.type];currentInput!==value&&(currentInput&&"keyboard"===value&&9!==key&&formInputs.indexOf(target.nodeName.toLowerCase())>=0||(currentInput=value,body.setAttribute("data-whatinput",currentInput),-1===inputTypes.indexOf(currentInput)&&inputTypes.push(currentInput)))}var timer,body=document.body,buffer=!1,currentInput=null,formInputs=["input","select","textarea"],inputMap={keydown:"keyboard",mousedown:"mouse",touchstart:"touch",pointerdown:"pointer",MSPointerDown:"pointer"},inputTypes=[];return function(){var pointerPrefix="onmspointerdown"in window?"ms":"";if("on"+pointerPrefix+"pointerdown"in window){var pointerdown=pointerPrefix+"pointerdown";body.addEventListener(pointerdown,regularInput)}else body.addEventListener("mousedown",regularInput),"ontouchstart"in window&&body.addEventListener("touchstart",bufferInput);body.addEventListener("keydown",regularInput)}(),{ask:function(){return currentInput},types:function(){return inputTypes},set:setInput}});